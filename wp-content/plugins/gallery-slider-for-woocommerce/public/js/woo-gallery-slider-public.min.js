!function($){"use strict";jQuery((function(){$.fn.wpgspimagesLoaded=function(){var $imgs=this.find('img[src!=""]');if(!$imgs.length)return $.Deferred().resolve().promise();var dfds=[];return $imgs.each((function(){var dfd=$.Deferred();dfds.push(dfd);var img=new Image;img.onload=function(){dfd.resolve()},img.onerror=function(){dfd.resolve()},img.src=this.src})),$.when.apply($,dfds)};var settings=wcgs_object.wcgs_settings,wcgs_product_wrapper=wcgs_object.wcgs_product_wrapper,wcgs_body_font_size=parseInt(wcgs_object.wcgs_body_font_size),gallery_w=0,summary_w=0;function wcgs_slider_func(width){var width_unit=width>100?"px":"%";$(window).width()<992&&settings.gallery_responsive_width.width>0&&(width_unit=settings.gallery_responsive_width.unit),$(window).width()<768&&(width_unit=settings.gallery_responsive_width.unit),setTimeout((function(){if("%"===width_unit)summary_w=(summary_w=100-width)>20?"calc( "+summary_w+"% - 30px )":"";else{var parent_wrapper=$("#wpgs-gallery").parent("*"),parent_wrapper_width=parent_wrapper.width()>$("#wpgs-gallery").width()+100?parent_wrapper.width():0;summary_w=(summary_w=parent_wrapper_width>200?parent_wrapper_width-width:0)>150?summary_w-35+width_unit:"","em"===width_unit&&(summary_w=(summary_w=(parent_wrapper_width/=wcgs_body_font_size)>width?parent_wrapper_width-width:0)>12?summary_w-3+width_unit:"")}$("#wpgs-gallery ~ .summary").css("maxWidth",summary_w)}),100),$("#wpgs-gallery").css("minWidth","auto").css("maxWidth",width+width_unit);var wcgs_img_count=$("#wpgs-gallery").find(".gallery-navigation-carousel .wcgs-thumb").length,thumbnails_item_to_show=parseInt(settings.thumbnails_item_to_show),adaptive_height="1"==settings.adaptive_height,accessibility="1"==settings.accessibility,pagination="1"==settings.pagination,navigation="1"==settings.navigation,slider_dir=!("1"!=settings.slider_dir&&!$("body").hasClass("rtl")),infinite="1"==settings.infinite_loop,thumbnail_nav=1==settings.thumbnailnavigation,slide_orientation="vertical"==settings.slide_orientation,carousel_items,pagination_visibility,navigation_visibility,thumb_navigation_visibility,isPreloader;if(1==wcgs_img_count?$("#wpgs-gallery").find(".gallery-navigation-carousel").hide():$("#wpgs-gallery").find(".gallery-navigation-carousel").show(),$(".wcgs-carousel:not(.slick-initialized) .wcgs-slider-image").length>0&&("function"==typeof $.fn.slick?$(".wcgs-carousel:not(.slick-initialized)").slick({slidesToShow:1,infinite:infinite,accessibility:accessibility,autoplay:!1,slidesToScroll:1,speed:300,rtl:"vertical"!=settings.slide_orientation&&slider_dir,rows:0,vertical:slide_orientation,adaptiveHeight:adaptive_height,arrows:navigation,fade:!1,dots:pagination,focusOnSelect:!0,asNavFor:".gallery-navigation-carousel",prevArrow:'<a class="sp_wgs-icon-left-open" data-role="none" aria-label="Prev slide"></a>',nextArrow:'<a class="sp_wgs-icon-right-open" data-role="none" aria-label="Next slide"></a>'}):console.log("slick is not loaded")),"function"==typeof $.fn.slick?$(".gallery-navigation-carousel:not(.slick-initialized)").slick({infinite:infinite,slidesToShow:thumbnails_item_to_show,slidesToScroll:1,asNavFor:".wcgs-carousel",vertical:!1,verticalSwiping:!1,centerMode:!1,centerPadding:"0",rtl:slider_dir,rows:0,arrows:thumbnail_nav,focusOnSelect:!0,prevArrow:'<a class="sp_wgs_thumb_nav sp_wgs-icon-left-open" data-role="none" aria-label="Prev slide"></a>',nextArrow:'<a class="sp_wgs_thumb_nav sp_wgs-icon-right-open" data-role="none" aria-label="Next slide"></a>'}):console.log("slick is not loaded"),$(document).on("click",".wcgs-carousel .wcgs-lightbox",(function(e){$(document).find(".wcgs-carousel .slick-current.slick-active").trigger("click")})),slide_orientation){var maxHeight=0;$("#wpgs-gallery .wcgs-carousel .wcgs-slider-image").each((function(){$(this).height()>maxHeight&&(maxHeight=$(this).innerHeight())})),$("#wpgs-gallery .wcgs-carousel .wcgs-slider-image").height(maxHeight),$("#wpgs-gallery .wcgs-carousel .wcgs-slider-image").css({display:"flex","justify-content":"center","align-items":"center"})}if($("body").hasClass("theme-savoy")){var slickArrow=[".sp_wgs-icon-left-open",".sp_wgs-icon-right-open",".sp_wgs-icon-left-open",".sp_wgs-icon-right-open"];$.each(slickArrow,(function(i,item){$("#wpgs-gallery "+item).addClass("slick-arrow")}))}"1"==settings.lightbox&&($("#wpgs-gallery .wcgs-carousel .wcgs-lightbox").length||$("#wpgs-gallery .wcgs-carousel").append('<div class="wcgs-lightbox top_right"><a href="javascript:;"><span class="sp_wgs-icon-search"></span></a></div>')),"hover"==settings.pagination_visibility&&($("#wpgs-gallery .slick-dots").hide(),$("#wpgs-gallery .wcgs-carousel").on({mouseenter:function(){$("#wpgs-gallery .slick-dots").show()},mouseleave:function(){$("#wpgs-gallery .slick-dots").hide()}})),"hover"==settings.navigation_visibility&&($("#wpgs-gallery .slick-arrow:not(.sp_wgs_thumb_nav)").hide(),$("#wpgs-gallery .wcgs-carousel").on({mouseenter:function(){$("#wpgs-gallery .slick-arrow:not(.sp_wgs_thumb_nav)").show()},mouseleave:function(){$("#wpgs-gallery .slick-arrow:not(.sp_wgs_thumb_nav)").hide()}})),"hover"==settings.thumb_nav_visibility&&($("#wpgs-gallery .sp_wgs_thumb_nav").hide(),$("#wpgs-gallery .gallery-navigation-carousel").on({mouseenter:function(){$("#wpgs-gallery .sp_wgs_thumb_nav").show()},mouseleave:function(){$("#wpgs-gallery .sp_wgs_thumb_nav").hide()}})),1==settings.preloader&&($(".wcgs-gallery-preloader").length||$("#wpgs-gallery").append('<div class="wcgs-gallery-preloader"></div>'))}function videoIcon(){$(".wcgs-slider-image, .wcgs-thumb").each((function(){var icon;$(this).find("img").data("type")&&$(this).append('<div class="video-icon"></div>')}))}function dataZoom(){$(".wcgs-slider-image").on("mouseenter mouseleave",(function(){$(this).attr("data-scale","1.5");var img=$(this).find("img").attr("src");$(this).attr("data-image",img)}))}function zoomFunction(){$(".wcgs-slider-image").on("mouseover",(function(){$(this).children(".photo").css({transform:"scale("+$(this).attr("data-scale")+")",transition:"all .5s"})})).on("mouseout",(function(){$(this).children(".photo").css({transform:"scale(1)",transition:"all .5s"})})).on("mousemove",(function(e){$(this).children(".photo").css({"transform-origin":(e.pageX-$(this).offset().left)/$(this).width()*100+"% "+(e.pageY-$(this).offset().top)/$(this).height()*100+"%",transition:"transform 1s ease-in"})})).each((function(){var photoLength;0===$(this).find(".photo").length&&$(this).append('<div class="photo"></div>'),$(this).children(".photo").css({"background-image":"url("+$(this).find("img").attr("src")+")"})}))}function zoomEffect(){if($(window).width()<480&&1==settings.mobile_zoom)return"";$(document).on("click",".wcgs-slider-image",(function(){zoomFunction()})),$(".wcgs-slider-image").on({mouseenter:function(){zoomFunction()},mouseleave:function(){zoomFunction()}})}function wcgsLightbox(){var lightbox;if(1==settings.lightbox){var gl_btns=["zoom"];1==settings.gallery_fs_btn&&gl_btns.push("fullScreen"),1==settings.gallery_share&&gl_btns.push("share"),gl_btns.push("close"),$.fancybox.defaults.buttons=gl_btns;var counter=1==settings.l_img_counter;$(".wcgs-carousel").fancybox({selector:".wcgs-carousel .wcgs-slider-image:not(.slick-cloned)",backFocus:!1,baseClass:"wcgs-fancybox-custom-wrapper",caption:function(){var caption="";return 1==settings.lightbox_caption&&(caption=$(this).find("img").data("cap")||""),caption},afterShow:function(instance,current){$(".wcgs-fancybox-custom-wrapper~.elementor-lightbox").remove()},infobar:counter,buttons:gl_btns,loop:!0})}else $(".wcgs-carousel .wcgs-slider-image").removeAttr("data-fancybox href")}function wcgs_initialize(){var gallery_width=settings.gallery_width;if(gallery_w=gallery_width,summary_w=100-gallery_width,$(window).width()>=992&&(summary_w=summary_w>20?summary_w:"100%",$("#wpgs-gallery ~ .summary").css("maxWidth","calc("+summary_w+"% - 30px)")),$("body").hasClass("et_divi_builder")||$("body").hasClass("theme-Divi")){var gallery_divi_width=$(".wcgs-gallery-slider.et-db #et-boc .et-l .et_pb_gutters3 .et_pb_column_1_2").width();"number"==typeof gallery_divi_width&&(gallery_w=gallery_divi_width)}if($("body").hasClass("theme-flatsome")){var gallery_flatsome_width=$(".single-product .product .row.content-row .product-gallery").width();"number"==typeof gallery_flatsome_width&&(gallery_w=gallery_flatsome_width)}if($(".woocommerce-product-gallery").parents(".hestia-product-image-wrap").length){var gallery_hestia_width=$(".woocommerce-product-gallery").parents(".hestia-product-image-wrap").width();"number"==typeof gallery_hestia_width&&(gallery_w=gallery_hestia_width)}$(window).width()<992&&settings.gallery_responsive_width.width>0&&(gallery_w=settings.gallery_responsive_width.width),$(window).width()<768&&(gallery_w=settings.gallery_responsive_width.height),$(window).width()<480&&(gallery_w=settings.gallery_responsive_width.height2),wcgs_slider_func(gallery_w)}function wcgsGalleryClickEvents(){var lightbox=1==settings.lightbox,wcgs_img_count=$("#wpgs-gallery").find(".gallery-navigation-carousel .wcgs-slider-image:not(.slick-cloned)").length;lightbox&&wcgs_img_count>1&&$(".wcgs-carousel").on("afterChange",(function(event,slick,currentSlide,nextSlide){$(".wcgs-lightbox a").attr("data-fancybox-index",currentSlide+1)}))}$("#wpgs-gallery").wpgspimagesLoaded().then((function(){$(".wcgs-gallery-preloader").css("opacity",0),$(".wcgs-gallery-preloader").css("z-index",-99)})),wcgs_initialize(),$(window).on("resize",(function(){wcgs_initialize()})),$(window).on("load",(function(){$(".wcgs-gallery-preloader").css("opacity",0),$(".wcgs-gallery-preloader").css("z-index",-99)})),videoIcon(),"1"==wcgs_object.wcgs_settings.zoom&&(dataZoom(),zoomEffect()),wcgsLightbox(),$(document).on("change",".variations select",(function(){var variationsArray={};if($(".variations tr").each((function(i){var attributeName=$(this).find("select").data("attribute_name"),attributeValue=$(this).find("select").val();attributeValue&&(variationsArray[attributeName]=attributeValue)})),wcgs_object.wcgs_data.length>0){var data=wcgs_object.wcgs_data;$.each(data,(function(i,v){var v0;if(("[]"==JSON.stringify(v[0])?"{}":JSON.stringify(v[0]))===JSON.stringify(variationsArray)){var response=v[1],gallery;if(response.length>0)$(".wcgs-gallery-preloader").css("z-index",99),$(".wcgs-gallery-preloader").css("opacity",.5),"function"==typeof $.fn.slick?($(".wcgs-carousel").slick("unslick"),$(".gallery-navigation-carousel").slick("unslick")):console.log("slick is not loaded"),$("#wpgs-gallery .wcgs-carousel > *, #wpgs-gallery .gallery-navigation-carousel > *").remove(),response.forEach((function(item,index){if(null!=item){var caption=item.cap.length>0?item.cap:"",checkVideo;if(!!item.hasOwnProperty("video")){var regex=/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/,video=item.video;if(regex.test(video)){var youtubeCheck=video.indexOf("youtub")>-1,vimeoCheck=video.indexOf("vimeo")>-1;if(youtubeCheck){var regExp=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,match,id=!(!(match=video.match(regExp))||11!=match[7].length)&&match[7];$("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+video+'" data-fancybox="view"><div class="wcgs-iframe-wraper"><img style="visibility: hidden;" alt="'+caption+'" data-videosrc="'+video+'" src="'+item.url+'" data-type="youtube" data-videoid="'+id+'" /><iframe frameborder="0"  src="https://www.youtube.com/embed/'+id+'" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="true"></iframe></div></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" data-videosrc="'+video+'" src="'+item.thumb_url+'" data-type="youtube" data-videoid="'+id+'" /></div>')}if(vimeoCheck){var regExp=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,match,id=(match=video.match(regExp))[5];$("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+video+'" data-fancybox="view"><div class="wcgs-iframe-wraper"><img style="visibility: hidden;" alt="'+caption+'" data-videosrc="'+video+'" src="'+item.url+'" data-type="vimeo" data-videoid="'+id+'" /><iframe src="https://player.vimeo.com/video/'+id+'" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe></div></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" data-videosrc="'+video+'" src="'+item.thumb_url+'" data-type="vimeo" data-videoid="'+id+'"   /></div>')}youtubeCheck||vimeoCheck||($("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+video+'" data-fancybox="view"><div class="wcgs-iframe-wraper"><video controls><source src="'+video+'" type="video/mp4"></video><img  style="visibility: hidden;" alt="'+caption+'" data-videosrc="'+video+'" src="'+item.url+'" data-type="html5video" data-videomp4="'+video+'" /></div></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" data-videosrc="'+video+'" src="'+item.thumb_url+'" data-type="html5video" data-videomp4="'+video+'" /></div>'))}else $("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+item.url+'" data-fancybox="view"><img alt="'+caption+'" src="'+item.url+'" data-image="'+item.url+'" /></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" src="'+item.thumb_url+'" data-image="'+item.url+'" /></div>')}else $("#wpgs-gallery .wcgs-carousel").append('<a class="wcgs-slider-image" href="'+item.full_url+'" data-fancybox="view"><img alt="'+caption+'" src="'+item.url+'" data-image="'+item.full_url+'" /></a>'),$("#wpgs-gallery .gallery-navigation-carousel").append('<div class="wcgs-thumb"><img alt="'+caption+'" src="'+item.thumb_url+'" data-image="'+item.url+'" /></div>')}})),$("#wpgs-gallery").wpgspimagesLoaded().then((function(){wcgs_slider_func(gallery_w);var slickHeight=$(".wcgs-carousel .slick-list").height();slickHeight<50&&(slickHeight=$(".wcgs-carousel .slick-current").height(),$(".wcgs-carousel .slick-list").css("height",slickHeight)),setTimeout((function(){wcgsGalleryClickEvents(),"1"==wcgs_object.wcgs_settings.zoom&&(dataZoom(),zoomEffect()),videoIcon(),wcgsLightbox(),$(".wcgs-gallery-preloader").css("z-index",-99),$(".wcgs-gallery-preloader").css("opacity",0)}),200)}))}}))}else console.log("gallery-attr length:"+$(document).find(".wpgs-gallery-attr").length)})),$((function(){wcgsGalleryClickEvents()})),$(document).on("click",".wcgs-gallery-slider .variations .select-option.swatch-wrapper",(function(e){var $this,$option_wrapper,$wc_select_box;$(this).closest("div.select").eq(0).find("select").first().trigger("change")}))}))}(jQuery);